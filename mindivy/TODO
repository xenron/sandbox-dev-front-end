2014.10.1

1. 把 text dom 换成 pre 元素. [OK]
  1.1 把文本编辑逻辑抽取成单独的类. [OK]
2. 把 Idea 类名换成 Topic . [OK]


3. 解决 textarea 输入文字过程中的抖动问题 . [OK]
3.1 修改 textarea 的自动增长方式. [OK]
3.2 fix和重构自动布局方法，把节点宽度考虑进去 . [OK]
3.3 生成节点的时候记录节点所在的层级. [OK]


3.4 减少多余的计算. [OK]


4. 完成 canvas 画线方法 . [OK]
5. 增加和删除节点的键盘快捷键操作. [OK]
6. 增加上下左右移动支持. [OK]
6.1 上下移动的改进（父节点的前置的前置的前置。。。的最后一个子节点）. [OK]


7. 增加节点折叠展开逻辑
7.1 调整排版/画线方法以适应节点折叠展开逻辑 . [OK]
7.2 调整键盘上下左右移动方法以适应节点折叠展开逻辑. [OK]
7.3 处理焦点 (active) 变化的问题. [OK]

8. 插入图片. [OK]

9. 节点左右分列排布. [OK]
9.1 调整坐标计算. [OK]
9.2 调整折叠展开操作元素的位置. [OK]
9.3 调整画线方法. [OK]
9.4 调整键盘上下左右操作. [OK]

9.5 在左右侧一级节点按回车时，添加的新节点应该出现在同侧

jinhan13789 提的建议：
上下左右操作时，如果遇到没有展开的节点，试图往子节点移动焦点时
可以第一次按的时候展开，第二次按的时候聚焦。
考虑一下这样的体验是否合理


10 序列化和反序列化 -> JSON. [OK]
11 本地存储. [OK]
11.5 本地存储的展开关闭状态的保存

12 节点位置拖拽（很难做）[1/2]


↓ 今天
13 添加右键菜单. [OK]
14 左键按住空白处移动整体位置. [OK]
15 聚焦节点自动移入屏幕. [OK]

. 折叠展开的动画优化. [OK] (还可以细调，先不调了)
. 优化画线相关的动画，使之更平滑. [OK]

# -----------------------------------

. 完善导图节点拖拽改变结构的逻辑. [OK]
遗留 bug: 连续反复拖拽的过程中，有时候节点连线会丢

. 添加全局居中等定位操作按钮. [OK]
. 整体放大和缩小. [OK]
遗留 bug: 整体缩放后拖拽时坐标计算存在问题


------- 90%

. 添加 URL 链接
. 添加节点备注

. 增加 undo / redo 操作 (ctrl + Z / ctrl + Y) （很难做）

. web后端


. 图片相关体验改进
    图片对话框样式改进，url 正确性判断
    调整节点上的元素位置
    点击节点上的缩略图，查看全图


. 整体UI体验改进 (和设计师探讨)

x. 将调用依赖关系改为使用 sea.js 管理