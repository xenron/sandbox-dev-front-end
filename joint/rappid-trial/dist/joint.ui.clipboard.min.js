/*! Rappid v1.7.1 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2016-03-03 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.ui.Clipboard=Backbone.Collection.extend({copyElements:function(a,b,c){c=c||{};var d=b.cloneSubgraph(a.models,c),e=[],f=[],g=[];return _.each(d,function(a,d){a.isLink()?(c.translate&&_.each(a.get("vertices"),function(a){a.x+=c.translate.dx||20,a.y+=c.translate.dy||20}),g.push(a)):(c.translate&&a.translate(c.translate.dx||20,c.translate.dy||20),f.push(a)),e.push(b.getCell(d))}),this.reset(f.concat(g)),c.useLocalStorage&&window.localStorage&&localStorage.setItem("joint.ui.Clipboard.cells",JSON.stringify(this.toJSON())),e},pasteCells:function(a,b){if(b=b||{},b.useLocalStorage&&this.isEmpty()&&window.localStorage){var c=(new joint.dia.Graph).fromJSON({cells:JSON.parse(localStorage.getItem("joint.ui.Clipboard.cells"))});this.reset(c.getCells())}a.trigger("batch:start"),this.each(function(c){c.unset("z"),c instanceof joint.dia.Link&&b.link&&c.set(b.link),a.addCell(c.toJSON())}),a.trigger("batch:stop")},clear:function(){this.reset([]),window.localStorage&&localStorage.removeItem("joint.ui.Clipboard.cells")}});